{% extends "base.html" %}

{% load filters %}

{% block body %}

  <div class="container pt-4">

    {% if messages %}
      <br />
      {% for message in messages %}
        <div class="alert {{ message.tags }} ">{{ message }}</div>
      {% endfor %}
    {% endif %}

    <form action="{% url 'add_produto' %}" method="POST" enctype="multipart/form-data">
      {% csrf_token %}
      <div class="form-row">
        <div class="form-group col-md-6">
          <label for="">Nome:</label>
          <input class="form-control" type="text" name="nome" />
        </div>
        
        <div class="form-group col-md-6">
          <label for="">Selecione a categoria do produto</label>
          <select class="form-control" name="categoria" id="">
            {% for categoria in categorias %}
              <option value="{{ categoria.id }}">{{ categoria.titulo }}</option>
            {% endfor %}
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group col-md-4">
          <label for="">Estoque inicial:</label>
          <input class="form-control" type="number" name="quantidade" />
        </div>
        <div class="form-group col-md-4">
          <label for="">Preço de compra:</label>
          <input class="form-control" type="number" name="preco_compra" />
        </div>
        <div class="form-group col-md-4">
          <label for="">Preço de venda:</label>
          <input class="form-control" type="number" name="preco_venda" />
        </div>
      </div>

      <label for="">Imagens:</label>
      {% comment %} <input class="form-control" type="file" name="imagens" multiple /> {% endcomment %}
      
      <div class="custom-file">
        <input type="file" class="custom-file-input" id="customFile" name="imagens" multiple>
        <label class="custom-file-label" for="customFile" data-browse="Buscar">Selecionar imagens</label>
      </div>
      
      <input class="btn btn-sm btn-success mt-4" type="submit" value="Enviar">
    </form>

    <hr style="background-color: gray;">
    <div class="listar_produtos">
      <div class="row">
        {% for produto in produtos %}
          <div class="col-md">
            <div class="card" style="width: 15rem; background-color: lightgray; color: black;">
              {% if produto|get_first_image %}
                <img width="100%" src="{{produto|get_first_image}}" class="card-img-top" alt="...">
              {% endif %}
              <div class="card-body">
                <h5 class="card-title">{{produto.nome}}</h5>
                <span class="badge badge-info">{{produto.categoria}}</span>
                <br>
                <a href="#" class="btn btn-primary mt-2">Acessar</a>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>

{% endblock body %}